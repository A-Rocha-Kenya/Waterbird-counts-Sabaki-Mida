<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Raphaël Nussbaumer">

<title>Generate GBIF dataset: metadata, figures and tables</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="generate_gbif_files_files/libs/clipboard/clipboard.min.js"></script>
<script src="generate_gbif_files_files/libs/quarto-html/quarto.js"></script>
<script src="generate_gbif_files_files/libs/quarto-html/popper.min.js"></script>
<script src="generate_gbif_files_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="generate_gbif_files_files/libs/quarto-html/anchor.min.js"></script>
<link href="generate_gbif_files_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="generate_gbif_files_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="generate_gbif_files_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="generate_gbif_files_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="generate_gbif_files_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="generate_gbif_files_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="generate_gbif_files_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="generate_gbif_files_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="generate_gbif_files_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="generate_gbif_files_files/libs/datatables-binding-0.32/datatables.js"></script>
<script src="generate_gbif_files_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="generate_gbif_files_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="generate_gbif_files_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="generate_gbif_files_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="generate_gbif_files_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="generate_gbif_files_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#load-data" id="toc-load-data" class="nav-link" data-scroll-target="#load-data">Load data</a></li>
  <li><a href="#basic-statistic" id="toc-basic-statistic" class="nav-link" data-scroll-target="#basic-statistic">Basic statistic</a></li>
  </ul></li>
  <li><a href="#quality-control" id="toc-quality-control" class="nav-link" data-scroll-target="#quality-control">Quality control</a>
  <ul class="collapse">
  <li><a href="#assessement-1-unique-value-per-event" id="toc-assessement-1-unique-value-per-event" class="nav-link" data-scroll-target="#assessement-1-unique-value-per-event">Assessement 1: Unique value per event</a></li>
  <li><a href="#assessement-2-not-empty-species-or-count" id="toc-assessement-2-not-empty-species-or-count" class="nav-link" data-scroll-target="#assessement-2-not-empty-species-or-count">Assessement 2: Not empty species or count</a></li>
  <li><a href="#assessement-3-species-validation-correct" id="toc-assessement-3-species-validation-correct" class="nav-link" data-scroll-target="#assessement-3-species-validation-correct">Assessement 3: Species validation correct</a></li>
  <li><a href="#assessement-5-unique-observation" id="toc-assessement-5-unique-observation" class="nav-link" data-scroll-target="#assessement-5-unique-observation">Assessement 5: Unique observation</a></li>
  <li><a href="#assessement-5-manual-check-of-specie-and-count" id="toc-assessement-5-manual-check-of-specie-and-count" class="nav-link" data-scroll-target="#assessement-5-manual-check-of-specie-and-count">Assessement 5: Manual check of Specie and count</a></li>
  </ul></li>
  <li><a href="#dataset-description" id="toc-dataset-description" class="nav-link" data-scroll-target="#dataset-description">Dataset Description</a>
  <ul class="collapse">
  <li><a href="#geographic-coverage" id="toc-geographic-coverage" class="nav-link" data-scroll-target="#geographic-coverage">Geographic coverage</a></li>
  </ul></li>
  <li><a href="#taxonomic-coverage" id="toc-taxonomic-coverage" class="nav-link" data-scroll-target="#taxonomic-coverage">Taxonomic coverage</a></li>
  <li><a href="#temporal-coverage" id="toc-temporal-coverage" class="nav-link" data-scroll-target="#temporal-coverage">Temporal coverage</a></li>
  <li><a href="#content-providers" id="toc-content-providers" class="nav-link" data-scroll-target="#content-providers">Content providers</a></li>
  <li><a href="#export-in-darwin-format" id="toc-export-in-darwin-format" class="nav-link" data-scroll-target="#export-in-darwin-format">Export in Darwin format</a>
  <ul class="collapse">
  <li><a href="#export-event-table" id="toc-export-event-table" class="nav-link" data-scroll-target="#export-event-table">Export Event table</a></li>
  <li><a href="#export-occurance-table" id="toc-export-occurance-table" class="nav-link" data-scroll-target="#export-occurance-table">Export occurance table</a></li>
  </ul></li>
  <li><a href="#write-to-excel" id="toc-write-to-excel" class="nav-link" data-scroll-target="#write-to-excel">Write to Excel</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Generate GBIF dataset: metadata, figures and tables</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Raphaël Nussbaumer </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This script produces the information for the metadata (figures, tables and key numbers) and generate the <code>events.csv</code> and <code>occurances.csv</code> files in Darwin format for the publication of the <a href="https://github.com/A-Rocha-Kenya/Waterbird-counts-Sabaki-Mida">waterbird count data of Sabaki and Mida</a> on GBIF (doi).</p>
<section id="load-data" class="level3">
<h3 class="anchored" data-anchor-id="load-data">Load data</h3>
<p>The data are entered and stored in a excel spreadsheet alongside all other waterbird counts performed by <a href="https://www.arocha.or.ke/">A Rocha Kenya</a> since 1998. Here, we filter for the counts performed at Mida and Sabaki.</p>
<p>At Sabaki, some counts were performed in two teams on each side of the river (north-south). Here, we sums these counts.</p>
<p>We also load <code>species.list</code> and <code>locations.list</code> from other sheets which contains more information on species and locations than the main <code>counts</code> table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>countst <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"../data/water_bird_count_data.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"Main"</span>, <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"text"</span>, <span class="st">"numeric"</span>,<span class="st">"text"</span>, <span class="st">"text"</span>, <span class="st">"date"</span>, <span class="st">"date"</span>, <span class="st">"date"</span>, <span class="st">"text"</span>,<span class="st">"text"</span>,<span class="st">"text"</span>,<span class="st">"text"</span>,<span class="st">"text"</span>,<span class="st">"text"</span>,<span class="st">"text"</span>,<span class="st">"text"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">quality=</span><span class="st">""</span>, <span class="at">coverage=</span><span class="st">""</span>, <span class="at">method=</span><span class="st">""</span>,<span class="at">water=</span><span class="st">""</span>,<span class="at">weather=</span><span class="st">""</span>,<span class="at">disturbed=</span><span class="st">""</span>, <span class="at">tidal=</span><span class="st">""</span>,<span class="at">participants=</span><span class="st">""</span>,<span class="at">comment=</span><span class="st">""</span>))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># filter(date&lt;"2021-01-01") %&gt;% # Limit dataset publish to the year 2020</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>counts <span class="ot">&lt;-</span> countst <span class="sc">%&gt;%</span> </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(site<span class="sc">==</span><span class="st">'Mida Creek'</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="at">by =</span> <span class="fu">c</span>(<span class="st">"date"</span>, <span class="st">"common_name"</span>, <span class="st">"count"</span>, <span class="st">"quality"</span>, <span class="st">"site"</span>, <span class="st">"start_time"</span>, <span class="st">"end_time"</span>, <span class="st">"coverage"</span>, <span class="st">"method"</span>, <span class="st">"water"</span>, <span class="st">"tidal"</span>, <span class="st">"weather"</span>, <span class="st">"disturbed"</span>, <span class="st">"participants"</span>, <span class="st">"comment"</span>),</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge count make simultaneously anywhere in Sabaki (North, South or Sabaki)</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>countst <span class="sc">%&gt;%</span> </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(site<span class="sc">==</span><span class="st">'Sabaki (South)'</span> <span class="sc">|</span> site<span class="sc">==</span><span class="st">'Sabaki (North)'</span><span class="sc">|</span> site<span class="sc">==</span><span class="st">'Sabaki'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span> </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">start_time =</span> <span class="fu">min</span>(start_time),</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">end_time =</span> <span class="fu">max</span>(end_time)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(common_name, date) <span class="sc">%&gt;%</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">sum</span>(count),</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">quality=</span> <span class="fu">first</span>(quality), </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">site =</span> <span class="st">'Sabaki'</span>, </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">start_time =</span> <span class="fu">min</span>(start_time),</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">end_time =</span> <span class="fu">max</span>(end_time),</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">coverage =</span> <span class="fu">first</span>(coverage),</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">method =</span> <span class="fu">first</span>(method),</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">water =</span> <span class="fu">first</span>(water),</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>            <span class="at">tidal =</span> <span class="fu">first</span>(tidal),</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">weather =</span> <span class="fu">first</span>(weather),</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">disturbed =</span> <span class="fu">first</span>(disturbed),</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>            <span class="at">participants =</span> <span class="fu">first</span>(participants),</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>            <span class="at">comment =</span> <span class="fu">first</span>(comment),</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">'drop'</span>)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>species.list <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"../data/water_bird_count_data.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"Species"</span>)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>locations.list <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"../data/water_bird_count_data.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"Sites"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>( site_name<span class="sc">==</span><span class="st">'Sabaki'</span> <span class="sc">|</span> site_name<span class="sc">==</span><span class="st">'Mida Creek'</span>)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>participants.list <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"../data/water_bird_count_data.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"Participants"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="basic-statistic" class="level3">
<h3 class="anchored" data-anchor-id="basic-statistic">Basic statistic</h3>
<p>We provide a basic description of the dataset with the following table</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">site</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nbSurvey</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nbTaxon</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nbObs</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nbInd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Combined</td>
<td style="text-align: right;">257</td>
<td style="text-align: right;">118</td>
<td style="text-align: right;">7644</td>
<td style="text-align: right;">983666</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mida Creek</td>
<td style="text-align: right;">121</td>
<td style="text-align: right;">82</td>
<td style="text-align: right;">2534</td>
<td style="text-align: right;">363696</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sabaki</td>
<td style="text-align: right;">136</td>
<td style="text-align: right;">109</td>
<td style="text-align: right;">5110</td>
<td style="text-align: right;">619970</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>The total dataset includes: 257 surveys (Mida Creek:121 ; Sabaki:136), 118 taxons recorded (MC:82 ; S:109),7644 sightings (MC:5110 ; S:2534) and 9.83666^{5} individuals (MC:3.63696^{5} ; S:6.1997^{5}).</p>
</section>
</section>
<section id="quality-control" class="level2">
<h2 class="anchored" data-anchor-id="quality-control">Quality control</h2>
<section id="assessement-1-unique-value-per-event" class="level3">
<h3 class="anchored" data-anchor-id="assessement-1-unique-value-per-event">Assessement 1: Unique value per event</h3>
<p>Check that there is an unique survey (defined as date+site), meaning that all metadata are the same for all the observations of each surveys.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>counts <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date, site) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">disctinct_starttime =</span> <span class="fu">n_distinct</span>(start_time),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">disctinct_endtime =</span> <span class="fu">n_distinct</span>(end_time),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">disctinct_coverage =</span> <span class="fu">n_distinct</span>(coverage),</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">disctinct_method =</span> <span class="fu">n_distinct</span>(method),</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">disctinct_water =</span> <span class="fu">n_distinct</span>(water),</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">disctinct_tidal =</span> <span class="fu">n_distinct</span>(tidal),</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">disctinct_weather =</span> <span class="fu">n_distinct</span>(weather),</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">disctinct_disturbed =</span> <span class="fu">n_distinct</span>(disturbed),</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">disctinct_participants =</span> <span class="fu">n_distinct</span>(participants),</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">disctinct_tidal =</span> <span class="fu">n_distinct</span>(tidal)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  , <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">rowSums</span>( .<span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">&gt;</span> <span class="dv">2</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 11
# ℹ 11 variables: date &lt;dttm&gt;, site &lt;chr&gt;, disctinct_starttime &lt;int&gt;,
#   disctinct_endtime &lt;int&gt;, disctinct_coverage &lt;int&gt;, disctinct_method &lt;int&gt;,
#   disctinct_water &lt;int&gt;, disctinct_tidal &lt;int&gt;, disctinct_weather &lt;int&gt;,
#   disctinct_disturbed &lt;int&gt;, disctinct_participants &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="assessement-2-not-empty-species-or-count" class="level3">
<h3 class="anchored" data-anchor-id="assessement-2-not-empty-species-or-count">Assessement 2: Not empty species or count</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>counts <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(count))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 15
# ℹ 15 variables: common_name &lt;chr&gt;, count &lt;dbl&gt;, quality &lt;chr&gt;, site &lt;chr&gt;,
#   date &lt;dttm&gt;, start_time &lt;dttm&gt;, end_time &lt;dttm&gt;, coverage &lt;chr&gt;,
#   method &lt;chr&gt;, water &lt;chr&gt;, tidal &lt;chr&gt;, weather &lt;chr&gt;, disturbed &lt;chr&gt;,
#   participants &lt;chr&gt;, comment &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>counts <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(common_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 15
# ℹ 15 variables: common_name &lt;chr&gt;, count &lt;dbl&gt;, quality &lt;chr&gt;, site &lt;chr&gt;,
#   date &lt;dttm&gt;, start_time &lt;dttm&gt;, end_time &lt;dttm&gt;, coverage &lt;chr&gt;,
#   method &lt;chr&gt;, water &lt;chr&gt;, tidal &lt;chr&gt;, weather &lt;chr&gt;, disturbed &lt;chr&gt;,
#   participants &lt;chr&gt;, comment &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="assessement-3-species-validation-correct" class="level3">
<h3 class="anchored" data-anchor-id="assessement-3-species-validation-correct">Assessement 3: Species validation correct</h3>
<p>Check that the name entered have their equivalence in the Specie tab of the spreadsheet. Often, it is a problem of case-sensitive.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>counts <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(common_name) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(species.list, <span class="at">by=</span><span class="st">"common_name"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>( <span class="fu">is.na</span>(scientific_name) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 7
# ℹ 7 variables: common_name &lt;chr&gt;, sort_2019 &lt;dbl&gt;, scientific_name &lt;chr&gt;,
#   family &lt;chr&gt;, family_english &lt;chr&gt;, taxon_rank &lt;chr&gt;, taxon_id &lt;chr&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>counts <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reframe</span>(common_name) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(species.list, <span class="at">by=</span><span class="st">"common_name"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 118 × 7
   common_name        sort_2019 scientific_name family family_english taxon_rank
   &lt;chr&gt;                  &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;          &lt;chr&gt;     
 1 Bar-Tailed Godwit       201  Limosa lapponi… Scolo… Sandpipers an… Species   
 2 Caspian Tern            264  Hydroprogne ca… Larid… Gulls, Terns … Species   
 3 Common Greenshank       226  Tringa nebular… Scolo… Sandpipers an… Species   
 4 Common Ringed Plo…      175  Charadrius hia… Chara… Plovers and L… Species   
 5 Crab-Plover             234  Dromas ardeola  Droma… Crab-plover    Species   
 6 Curlew Sandpiper        210  Calidris ferru… Scolo… Sandpipers an… Species   
 7 Dimorphic Egret         317. Egretta (garze… Ardei… Herons, Egret… Subspecies
 8 Eurasian Curlew         199  Numenius arqua… Scolo… Sandpipers an… Species   
 9 Greater Sand Plov…      183  Charadrius les… Chara… Plovers and L… Species   
10 Grey Plover             174  Pluvialis squa… Chara… Plovers and L… Species   
# ℹ 108 more rows
# ℹ 1 more variable: taxon_id &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="assessement-5-unique-observation" class="level3">
<h3 class="anchored" data-anchor-id="assessement-5-unique-observation">Assessement 5: Unique observation</h3>
<p>Check that Species are entered only once for each survey.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>counts <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date, site,common_name) <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 15
# Groups:   date, site, common_name [0]
# ℹ 15 variables: common_name &lt;chr&gt;, count &lt;dbl&gt;, quality &lt;chr&gt;, site &lt;chr&gt;,
#   date &lt;dttm&gt;, start_time &lt;dttm&gt;, end_time &lt;dttm&gt;, coverage &lt;chr&gt;,
#   method &lt;chr&gt;, water &lt;chr&gt;, tidal &lt;chr&gt;, weather &lt;chr&gt;, disturbed &lt;chr&gt;,
#   participants &lt;chr&gt;, comment &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="assessement-5-manual-check-of-specie-and-count" class="level3">
<h3 class="anchored" data-anchor-id="assessement-5-manual-check-of-specie-and-count">Assessement 5: Manual check of Specie and count</h3>
<p>Export pivot table for expert assessment of count</p>
</section>
</section>
<section id="dataset-description" class="level2">
<h2 class="anchored" data-anchor-id="dataset-description">Dataset Description</h2>
<section id="geographic-coverage" class="level3">
<h3 class="anchored" data-anchor-id="geographic-coverage">Geographic coverage</h3>
<p><strong>Bounding box</strong>:</p>
</section>
</section>
<section id="taxonomic-coverage" class="level2">
<h2 class="anchored" data-anchor-id="taxonomic-coverage">Taxonomic coverage</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>species.list.recorded <span class="ot">&lt;-</span> counts <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(common_name) <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">nbObs =</span> <span class="fu">n</span>(), </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">nbInd =</span> <span class="fu">sum</span>(count), </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstObs =</span> <span class="fu">min</span>(date),</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">lastObs =</span> <span class="fu">max</span>(date),</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(species.list, <span class="at">by=</span><span class="st">"common_name"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(nbInd))</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>species.list.recorded <span class="sc">%&gt;%</span> <span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item" id="htmlwidget-dcb7585641b5f85140aa" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-dcb7585641b5f85140aa">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118"],["Curlew Sandpiper","Little Stint","Lesser Flamingo","Lesser Sand Plover","Crab-Plover","Unidentified Shorebird","Greater Sand Plover","Common Ringed Plover","Saunders'S Tern","Lesser Crested Tern","Common Tern","Grey Plover","Sooty Gull","Terek Sandpiper","Common Greenshank","Greater Crested Tern","Whimbrel","Greater Flamingo","Unidentified Terns","White-Faced Whistling Duck","Gull-Billed Tern","Madagascar Pratincole","Sanderling","African Fish Eagle","Lesser Black-Backed Gull","Common Sandpiper","Sacred Ibis","Lesser/Greater Sand Plover","Spur-Winged Plover","Caspian Tern","White-Fronted Plover","Yellow-Billed Stork","White-Winged Black Tern","African Spoonbill","Pied Avocet","Marsh Sandpiper","Eurasian Curlew","Dimorphic Egret","African Open-Billed Stork","Pink-Backed Pelican","Roseate Tern","Grey Heron","Broad-Billed Sandpiper","Heuglin'S Gull","Eurasian Oystercatcher","Collared Pratincole","Little Egret","Cattle Egret","Bar-Tailed Godwit","Wood Sandpiper","Fulvous Whistling Duck","Water Thick-Knee","Great White Pelican","Kittlitz'S Plover","Pied Kingfisher","Woolly-Necked Stork","Egyptian Goose","Ruddy Turnstone","Great White Egret","Black-Headed Heron","Malachite Kingfisher","Black-Headed Gull","Knob-Billed Duck","Little Ringed Plover","Three-Banded Plover","Hadada Ibis","Baltic Gull","Ruff","Sooty Tern","Red-Billed Teal","Glossy Ibis","White-Cheeked Tern","Long-Tailed Cormorant","Black-Winged Stilt","Yellow-Billed Egret","Senegal Plover","Striated Heron","Grey-Headed Kingfisher","Caspian Plover","African Skimmer","Mangrove Kingfisher","Grey-Headed Gull","Squacco Heron","Green Sandpiper","Osprey","Black Heron","Black Tern","Great Cormorant","Spur-Winged Goose","Common Snipe","Madagascar Pond Heron","Palm-Nut Vulture","Common Redshank","Garganey","Greater Painted-Snipe","Hottentot Teal","Little Tern","Western Marsh Harrier","Brown Noddy","Goliath Heron","Shoebill","Black-Tailed Godwit","Unidentified Egret Or Heron","African Pygmy Goose","Red-Necked Phalarope","African Jacana","African Marsh Harrier","African Pygmy Kingfisher","Black Crake","Black-Winged Plover","Dwarf Bittern","Kentish Plover","Pacific Golden Plover","Sandwich Tern","Slender-Billed Gull","Spotted Redshank","Striped Kingfisher","White Stork"],[230,197,104,234,164,43,223,215,128,202,105,237,128,217,243,135,238,150,15,79,220,38,195,59,95,128,221,13,126,116,180,199,69,149,65,103,190,178,34,85,11,159,39,68,19,51,57,40,100,73,19,69,33,55,162,93,27,107,97,98,54,8,32,1,64,32,7,10,3,13,6,6,20,16,13,7,37,17,8,13,19,10,7,9,21,7,1,2,3,5,6,11,8,3,2,2,3,4,1,5,2,2,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1],[204400,102963,73525,57640,56408,50643,46428,44740,42044,40701,29912,28950,27213,18682,18615,15626,15186,12928,9952,8778,8597,6165,5161,4425,3687,3275,3220,3140,3124,2952,2877,2560,2324,2203,1975,1964,1944,1690,1536,1419,1371,1090,909,724,611,601,600,586,554,546,520,474,472,459,442,412,352,347,323,291,196,193,189,160,155,154,137,126,99,94,89,87,80,79,71,49,49,38,35,32,27,24,23,22,22,17,14,14,14,13,13,11,8,8,7,7,7,7,6,6,5,3,3,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1],["1998-10-29T00:00:00Z","1998-10-29T00:00:00Z","2000-01-30T00:00:00Z","1998-10-29T00:00:00Z","1998-10-29T00:00:00Z","2000-01-29T00:00:00Z","1998-10-29T00:00:00Z","1998-10-29T00:00:00Z","1998-10-29T00:00:00Z","1999-03-10T00:00:00Z","1999-05-10T00:00:00Z","1998-10-29T00:00:00Z","2000-01-30T00:00:00Z","1998-10-29T00:00:00Z","1998-10-29T00:00:00Z","2000-01-30T00:00:00Z","1998-10-29T00:00:00Z","1999-03-10T00:00:00Z","2001-01-21T00:00:00Z","2000-01-30T00:00:00Z","1998-10-29T00:00:00Z","2004-04-17T00:00:00Z","1998-10-29T00:00:00Z","2000-01-29T00:00:00Z","2000-01-30T00:00:00Z","2000-01-29T00:00:00Z","1998-10-29T00:00:00Z","2004-02-04T00:00:00Z","2000-01-30T00:00:00Z","1998-10-29T00:00:00Z","1999-05-10T00:00:00Z","1999-03-10T00:00:00Z","2004-02-04T00:00:00Z","1999-04-08T00:00:00Z","2004-02-01T00:00:00Z","2000-01-30T00:00:00Z","1998-10-29T00:00:00Z","1998-10-29T00:00:00Z","2000-01-30T00:00:00Z","2000-01-30T00:00:00Z","2005-06-04T00:00:00Z","1999-03-10T00:00:00Z","2000-01-30T00:00:00Z","2000-01-30T00:00:00Z","2004-02-04T00:00:00Z","2004-04-17T00:00:00Z","2000-01-29T00:00:00Z","2004-02-01T00:00:00Z","1998-10-29T00:00:00Z","1999-03-24T00:00:00Z","2000-01-30T00:00:00Z","2000-01-30T00:00:00Z","2004-02-01T00:00:00Z","2001-01-21T00:00:00Z","2000-01-29T00:00:00Z","2000-01-29T00:00:00Z","2000-01-30T00:00:00Z","1998-10-29T00:00:00Z","2004-12-19T00:00:00Z","2000-01-30T00:00:00Z","2001-01-21T00:00:00Z","2001-01-21T00:00:00Z","2000-01-30T00:00:00Z","2019-03-14T00:00:00Z","2009-01-25T00:00:00Z","2008-01-26T00:00:00Z","2004-02-01T00:00:00Z","1999-03-24T00:00:00Z","2018-11-06T00:00:00Z","2004-04-17T00:00:00Z","2015-09-17T00:00:00Z","2009-07-04T00:00:00Z","2009-01-25T00:00:00Z","2004-05-12T00:00:00Z","2010-08-27T00:00:00Z","2010-05-25T00:00:00Z","2004-09-26T00:00:00Z","2013-07-23T00:00:00Z","2004-02-01T00:00:00Z","2004-08-12T00:00:00Z","2004-08-12T00:00:00Z","2015-01-17T00:00:00Z","2008-01-26T00:00:00Z","1999-03-10T00:00:00Z","2000-01-29T00:00:00Z","2005-03-28T00:00:00Z","2019-03-20T00:00:00Z","2014-03-07T00:00:00Z","2008-01-26T00:00:00Z","2008-01-26T00:00:00Z","2020-05-22T00:00:00Z","2018-04-11T00:00:00Z","2004-02-04T00:00:00Z","2015-11-04T00:00:00Z","2013-06-22T00:00:00Z","2019-07-18T00:00:00Z","2023-09-29T00:00:00Z","2005-01-29T00:00:00Z","2009-07-04T00:00:00Z","1999-03-10T00:00:00Z","2013-06-22T00:00:00Z","2014-03-07T00:00:00Z","2019-08-15T00:00:00Z","2011-01-30T00:00:00Z","2009-01-25T00:00:00Z","2014-04-11T00:00:00Z","2005-11-19T00:00:00Z","2018-04-11T00:00:00Z","2004-08-12T00:00:00Z","2019-03-14T00:00:00Z","2010-05-25T00:00:00Z","2001-01-21T00:00:00Z","2000-01-30T00:00:00Z","2023-12-23T00:00:00Z","2022-06-29T00:00:00Z","2010-08-27T00:00:00Z","2020-05-29T00:00:00Z","2014-09-06T00:00:00Z"],["2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-21T00:00:00Z","2023-03-28T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2023-03-28T00:00:00Z","2024-02-23T00:00:00Z","2024-02-21T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2020-05-22T00:00:00Z","2023-12-13T00:00:00Z","2024-02-23T00:00:00Z","2023-06-20T00:00:00Z","2024-02-23T00:00:00Z","2023-12-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2020-06-05T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2023-11-28T00:00:00Z","2024-02-23T00:00:00Z","2023-10-27T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-21T00:00:00Z","2024-01-24T00:00:00Z","2023-09-29T00:00:00Z","2023-09-29T00:00:00Z","2023-09-29T00:00:00Z","2024-02-23T00:00:00Z","2023-09-29T00:00:00Z","2023-11-28T00:00:00Z","2024-02-21T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2023-06-20T00:00:00Z","2024-02-21T00:00:00Z","2024-02-23T00:00:00Z","2023-10-27T00:00:00Z","2024-02-23T00:00:00Z","2023-12-13T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2024-01-23T00:00:00Z","2022-03-16T00:00:00Z","2023-03-28T00:00:00Z","2023-12-23T00:00:00Z","2024-02-23T00:00:00Z","2024-02-23T00:00:00Z","2021-01-28T00:00:00Z","2023-09-29T00:00:00Z","2019-03-14T00:00:00Z","2024-02-23T00:00:00Z","2023-09-29T00:00:00Z","2020-03-10T00:00:00Z","2020-03-20T00:00:00Z","2021-06-09T00:00:00Z","2019-08-15T00:00:00Z","2020-07-20T00:00:00Z","2022-09-23T00:00:00Z","2021-10-19T00:00:00Z","2022-11-23T00:00:00Z","2023-04-26T00:00:00Z","2024-01-24T00:00:00Z","2022-11-23T00:00:00Z","2024-02-23T00:00:00Z","2023-02-04T00:00:00Z","2022-01-24T00:00:00Z","2023-05-19T00:00:00Z","2023-03-08T00:00:00Z","2020-05-22T00:00:00Z","2024-01-24T00:00:00Z","2024-02-21T00:00:00Z","2023-05-12T00:00:00Z","2019-03-20T00:00:00Z","2019-06-04T00:00:00Z","2019-04-18T00:00:00Z","2013-01-27T00:00:00Z","2020-10-16T00:00:00Z","2024-02-23T00:00:00Z","2023-03-28T00:00:00Z","2018-12-06T00:00:00Z","2019-07-18T00:00:00Z","2019-10-08T00:00:00Z","2024-02-23T00:00:00Z","2018-01-30T00:00:00Z","2009-07-04T00:00:00Z","2011-01-30T00:00:00Z","2019-08-15T00:00:00Z","2014-11-15T00:00:00Z","2019-08-15T00:00:00Z","2011-01-30T00:00:00Z","2020-04-07T00:00:00Z","2014-04-11T00:00:00Z","2005-11-19T00:00:00Z","2018-04-11T00:00:00Z","2004-08-12T00:00:00Z","2019-03-14T00:00:00Z","2010-05-25T00:00:00Z","2001-01-21T00:00:00Z","2000-01-30T00:00:00Z","2023-12-23T00:00:00Z","2022-06-29T00:00:00Z","2010-08-27T00:00:00Z","2020-05-29T00:00:00Z","2014-09-06T00:00:00Z"],[210,206,51,182,234,null,183,175,262.2,268,272,174,254,220,226,270,198,50,null,3,263,243,204,387,259,221,318,null,188,264,179,289,266,320,172,225,199,317.3,290,297,271,310,212,259.2,170,241,317.1,309,201,228,4,167,296,177,508,293,7,202,314,311,504,252,9,176,178,322,259.1,213,261,24,323,273,330,171,315,190,305,509,184,250,514,251,306,227,334,316,267,331,8,219,307,341,224,16,195,17,262.1,375,248,312,299,200,null,10,229,197,376,503,146,191,302,180,173,269,253,223,511,294],["Calidris ferruginea","Calidris minuta","Phoeniconaias minor","Charadrius mongolus","Dromas ardeola","Charadriiformes sp.","Charadrius leschenaultii","Charadrius hiaticula","Sternula (albifrons) saundersi","Thalasseus bengalensis","Sterna hirundo","Pluvialis squatarola","Ichthyaetus hemprichii","Xenus cinereus","Tringa nebularia","Thalasseus bergii","Numenius phaeopus","Phoenicopterus roseus","Sterninae sp.","Dendrocygna viduata","Gelochelidon nilotica","Glareola ocularis","Calidris alba","Haliaeetus vocifer","Larus fuscus","Actitis hypoleucos","Threskiornis aethiopicus","Charadrius leschenaultii/mongolus","Vanellus spinosus","Hydroprogne caspia","Charadrius marginatus","Mycteria ibis","Chlidonias leucopterus","Platalea alba","Recurvirostra avosetta","Tringa stagnatilis","Numenius arquata","Egretta (garzetta) dimorpha","Anastomus lamelligerus","Pelecanus rufescens","Sterna dougallii","Ardea cinerea","Calidris falcinellus","Larus (fuscus) heuglini","Haematopus ostralegus","Glareola pratincola","Egretta garzetta","Bubulcus ibis","Limosa lapponica","Tringa glareola","Dendrocygna bicolor","Burhinus vermiculatus","Pelecanus onocrotalus","Charadrius pecuarius","Ceryle rudis","Ciconia episcopus","Alopochen aegyptiaca","Arenaria interpres","Ardea alba","Ardea melanocephala","Corythornis cristatus","Chroicocephalus ridibundus","Sarkidiornis melanotos","Charadrius dubius","Charadrius tricollaris","Bostrychia hagedash","Larus (fuscus) fuscus","Calidris pugnax","Onychoprion fuscatus","Anas erythrorhyncha","Plegadis falcinellus","Sterna repressa","Microcarbo africanus","Himantopus himantopus","Egretta intermedia","Vanellus lugubris","Butorides striata","Halcyon leucocephala","Charadrius asiaticus","Rynchops flavirostris","Halcyon senegaloides","Chroicocephalus cirrocephalus","Ardeola ralloides","Tringa ochropus","Pandion haliaetus","Egretta ardesiaca","Chlidonias niger","Phalacrocorax carbo","Plectropterus gambensis","Gallinago gallinago","Ardeola idae","Gypohierax angolensis","Tringa totanus","Spatula querquedula","Rostratula benghalensis","Spatula hottentota","Sternula albifrons","Circus aeruginosus","Anous stolidus","Ardea goliath","Balaeniceps rex","Limosa limosa","Ardeidae sp.","Nettapus auritus","Phalaropus lobatus","Actophilornis africanus","Circus ranivorus","Ispidina picta","Zapornia flavirostra","Vanellus melanopterus","Ixobrychus sturmii","Charadrius alexandrinus","Pluvialis fulva","Thalasseus sandvicensis","Chroicocephalus genei","Tringa erythropus","Halcyon chelicuti","Ciconia ciconia"],["Scolopacidae","Scolopacidae","Phoenicopteridae","Charadriidae","Dromadidae","Charadriidae","Charadriidae","Charadriidae","Laridae","Laridae","Laridae","Charadriidae","Laridae","Scolopacidae","Scolopacidae","Laridae","Scolopacidae","Phoenicopteridae","Laridae","Anatidae","Laridae","Glareolidae","Scolopacidae","Accipitridae","Laridae","Scolopacidae","Threskiornithidae","Charadriidae","Charadriidae","Laridae","Charadriidae","Ciconiidae","Laridae","Threskiornithidae","Recurvirostridae","Scolopacidae","Scolopacidae","Ardeidae","Ciconiidae","Pelecanidae","Laridae","Ardeidae","Scolopacidae","Laridae","Haematopodidae","Glareolidae","Ardeidae","Ardeidae","Scolopacidae","Scolopacidae","Anatidae","Burhinidae","Pelecanidae","Charadriidae","Alcedinidae","Ciconiidae","Anatidae","Scolopacidae","Ardeidae","Ardeidae","Alcedinidae","Laridae","Anatidae","Charadriidae","Charadriidae","Threskiornithidae","Laridae","Scolopacidae","Laridae","Anatidae","Threskiornithidae","Laridae","Phalacrocoracidae","Recurvirostridae","Ardeidae","Charadriidae","Ardeidae","Alcedinidae","Charadriidae","Laridae","Alcedinidae","Laridae","Ardeidae","Scolopacidae","Pandionidae","Ardeidae","Laridae","Phalacrocoracidae","Anatidae","Scolopacidae","Ardeidae","Accipitridae","Scolopacidae","Anatidae","Rostratulidae","Anatidae","Laridae","Accipitridae","Laridae","Ardeidae","Balaenicipitidae","Scolopacidae","Ardeidae","Anatidae","Scolopacidae","Jacanidae","Accipitridae","Alcedinidae","Rallidae","Charadriidae","Ardeidae","Charadriidae","Charadriidae","Laridae","Laridae","Scolopacidae","Alcedinidae","Ciconiidae"],["Sandpipers and Allies","Sandpipers and Allies","Flamingos","Plovers and Lapwings","Crab-plover","Plovers and Lapwings","Plovers and Lapwings","Plovers and Lapwings","Gulls, Terns and Skimmers","Gulls, Terns and Skimmers","Gulls, Terns and Skimmers","Plovers and Lapwings","Gulls, Terns and Skimmers","Sandpipers and Allies","Sandpipers and Allies","Gulls, Terns and Skimmers","Sandpipers and Allies","Flamingos","Gulls, Terns and Skimmers","Ducks and Geese","Gulls, Terns and Skimmers","Coursers and Pratincoles","Sandpipers and Allies","Hawks, Vultures, Buzzards, Eagles and Allies","Gulls, Terns and Skimmers","Sandpipers and Allies","Ibises and Spoonbills","Plovers and Lapwings","Plovers and Lapwings","Gulls, Terns and Skimmers","Plovers and Lapwings","Storks","Gulls, Terns and Skimmers","Ibises and Spoonbills","Stilts and Avocets","Sandpipers and Allies","Sandpipers and Allies","Herons, Egrets and Bitterns","Storks","Pelicans","Gulls, Terns and Skimmers","Herons, Egrets and Bitterns","Sandpipers and Allies","Gulls, Terns and Skimmers","Oystercatchers","Coursers and Pratincoles","Herons, Egrets and Bitterns","Herons, Egrets and Bitterns","Sandpipers and Allies","Sandpipers and Allies","Ducks and Geese","Thick-knees","Pelicans","Plovers and Lapwings","Kingfishers","Storks","Ducks and Geese","Sandpipers and Allies","Herons, Egrets and Bitterns","Herons, Egrets and Bitterns","Kingfishers","Gulls, Terns and Skimmers","Ducks and Geese","Plovers and Lapwings","Plovers and Lapwings","Ibises and Spoonbills","Gulls, Terns and Skimmers","Sandpipers and Allies","Gulls, Terns and Skimmers","Ducks and Geese","Ibises and Spoonbills","Gulls, Terns and Skimmers","Cormorants","Stilts and Avocets","Herons, Egrets and Bitterns","Plovers and Lapwings","Herons, Egrets and Bitterns","Kingfishers","Plovers and Lapwings","Gulls, Terns and Skimmers","Kingfishers","Gulls, Terns and Skimmers","Herons, Egrets and Bitterns","Sandpipers and Allies","Ospreys","Herons, Egrets and Bitterns","Gulls, Terns and Skimmers","Cormorants","Ducks and Geese","Sandpipers and Allies","Herons, Egrets and Bitterns","Hawks, Vultures, Buzzards, Eagles and Allies","Sandpipers and Allies","Ducks and Geese","Painted-snipes","Ducks and Geese","Gulls, Terns and Skimmers","Hawks, Vultures, Buzzards, Eagles and Allies","Gulls, Terns and Skimmers","Herons, Egrets and Bitterns","Shoebill","Sandpipers and Allies","Herons, Egrets and Bitterns","Ducks and Geese","Sandpipers and Allies","Jacanas","Hawks, Vultures, Buzzards, Eagles and Allies","Kingfishers","Rails, Crakes and Gallinules","Plovers and Lapwings","Herons, Egrets and Bitterns","Plovers and Lapwings","Plovers and Lapwings","Gulls, Terns and Skimmers","Gulls, Terns and Skimmers","Sandpipers and Allies","Kingfishers","Storks"],["Species","Species","Species","Slash","Species","Order","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Subfamily","Species","Species","Species","Species","Species","Species","Species","Species","Slash","Species","Species","Species","Species","Species","Species","Species","Species","Species","Subspecies","Species","Species","Species","Species","Species","Subspecies","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Subspecies","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Family","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species","Species"],["cursan","litsti","lesfla1","lesplo","craplo1","shoreb1","grsplo","corplo","sauter2","lecter2","comter","bkbplo","soogul2","tersan","comgre","grcter1","whimbr","grefla3","tern1","wfwduc1","gubter2","madpra1","sander","affeag1","lbbgul","comsan","sacibi2","y00648","spwlap1","caster1","whfplo1","yebsto1","whwter","afrspo1","pieavo1","marsan","eurcur","litegr2","afrope1","pibpel1","roster","graher1","brbsan","lbbgul4","euroys1","colpra","litegr","categr","batgod","woosan","fuwduc","watkne1","grwpel1","kitplo1","piekin1","wonsto1","egygoo","rudtur","greegr","blhher1","malkin1","bkhgul","comduc2","lirplo","thbplo1","hadibi1","lbbgul1","ruff","sooter1","rebduc1","gloibi","whcter1","lotcor1","bkwsti","integr3","senlap1","strher","gyhkin1","casplo1","afrski1","mankin2","grhgul","squher1","grnsan","osprey","blaher1","blkter","grecor","spwgoo1","comsni","mapher1","panvul1","comred1","gargan","grpsni1","hottea1","litter1","wemhar1","brnnod","golher1","shoebi1","bktgod","heron1","afrpyg1","renpha","afrjac1","afmhar1","afpkin1","blacra1","blwlap1","dwabit1","kenplo1","pagplo","santer1","slbgul1","spored","strkin1","whisto1"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>common_name<\/th>\n      <th>nbObs<\/th>\n      <th>nbInd<\/th>\n      <th>firstObs<\/th>\n      <th>lastObs<\/th>\n      <th>sort_2019<\/th>\n      <th>scientific_name<\/th>\n      <th>family<\/th>\n      <th>family_english<\/th>\n      <th>taxon_rank<\/th>\n      <th>taxon_id<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"common_name","targets":1},{"name":"nbObs","targets":2},{"name":"nbInd","targets":3},{"name":"firstObs","targets":4},{"name":"lastObs","targets":5},{"name":"sort_2019","targets":6},{"name":"scientific_name","targets":7},{"name":"family","targets":8},{"name":"family_english","targets":9},{"name":"taxon_rank","targets":10},{"name":"taxon_id","targets":11}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>family.list.recorded <span class="ot">&lt;-</span> species.list.recorded <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(family) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nbObs=</span><span class="fu">n</span>(), </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">family_english=</span><span class="fu">first</span>(family_english),</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">nbSpecies =</span> <span class="fu">sum</span>(nbObs),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">nbInd =</span> <span class="fu">sum</span>(nbInd), <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(nbInd))</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>family.list.recorded <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="sc">%&gt;%</span> <span class="fu">kable</span>() <span class="sc">%&gt;%</span> <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">family</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nbObs</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">family_english</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nbSpecies</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nbInd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Scolopacidae</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">Sandpipers and Allies</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">374721</td>
</tr>
<tr class="even">
<td style="text-align: left;">Charadriidae</td>
<td style="text-align: right;">16</td>
<td style="text-align: left;">Plovers and Lapwings</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">238403</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Laridae</td>
<td style="text-align: right;">23</td>
<td style="text-align: left;">Gulls, Terns and Skimmers</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">185704</td>
</tr>
<tr class="even">
<td style="text-align: left;">Phoenicopteridae</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Flamingos</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">86453</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dromadidae</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Crab-plover</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">56408</td>
</tr>
<tr class="even">
<td style="text-align: left;">Anatidae</td>
<td style="text-align: right;">9</td>
<td style="text-align: left;">Ducks and Geese</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">9964</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gsub("\"","",family.list.recorded %&gt;% </span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  transmute(a=paste0('*',family,'* (',family_english,')')) %&gt;% toString())</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># family.list.recorded$family_english</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The dataset includes 110 unique species and 8 other taxons (subspecies, family, slash etc.) belonging to 22 families.</p>
</section>
<section id="temporal-coverage" class="level2">
<h2 class="anchored" data-anchor-id="temporal-coverage">Temporal coverage</h2>
<p><strong>Temporal range</strong>: 1998-10-29 - 2024-02-23</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (s <span class="cf">in</span> <span class="fu">c</span>(<span class="st">'Sabaki'</span>,<span class="st">'Mida Creek'</span>)){</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> counts  <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>( site<span class="sc">==</span>s) <span class="sc">%&gt;%</span>  </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month=</span><span class="fu">month</span>(date), <span class="at">year =</span> <span class="fu">year</span>(date)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month, year) <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nb =</span> <span class="fu">n</span>(), <span class="at">.groups=</span><span class="st">"drop"</span>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>p1<span class="ot">&lt;-</span><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> month, <span class="at">color=</span> nb)) <span class="sc">+</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">7</span>, <span class="at">shape=</span><span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_gradientn</span>(<span class="at">colours =</span> <span class="fu">brewer.pal</span>(<span class="dv">9</span>, <span class="st">'YlGnBu'</span>)) <span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">min</span>(dt<span class="sc">$</span>year)<span class="sc">:</span><span class="fu">max</span>(dt<span class="sc">$</span>year)) <span class="sc">+</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>p3<span class="ot">&lt;-</span><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(<span class="at">x=</span>year)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="fu">length</span>(<span class="fu">min</span>(dt<span class="sc">$</span>year)<span class="sc">:</span><span class="fu">max</span>(dt<span class="sc">$</span>year))) <span class="sc">+</span> </span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">min</span>(dt<span class="sc">$</span>year)<span class="sc">:</span><span class="fu">max</span>(dt<span class="sc">$</span>year)) <span class="sc">+</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>p2<span class="ot">&lt;-</span><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(<span class="at">x=</span>month)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">12</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>)</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="fu">paste0</span>(<span class="st">"../assets/coverage_"</span>,s,<span class="st">".png"</span>), <span class="at">width =</span> <span class="dv">800</span>, <span class="at">height =</span> <span class="dv">400</span>)</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(p1,p2,p3,<span class="at">layout_matrix =</span> <span class="fu">cbind</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">6</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">3</span>)))</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(p1,p2,p3,<span class="at">layout_matrix =</span> <span class="fu">cbind</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">6</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">3</span>)))</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generate_gbif_files_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="generate_gbif_files_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="content-providers" class="level2">
<h2 class="anchored" data-anchor-id="content-providers">Content providers</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>counts<span class="sc">$</span>participants <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">toString</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">strsplit</span>(<span class="st">","</span>) <span class="sc">%&gt;%</span> <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> <span class="fu">trimws</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(<span class="cf">function</span>(x) participants.list<span class="sc">$</span>Name[participants.list<span class="sc">$</span>Initial <span class="sc">==</span> x]) <span class="sc">%&gt;%</span> </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> <span class="fu">sort</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">toString</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Agripina Havai, Ahmed Faraj, Alasdair Lindop, Albert Baya, Alex Mwalim, Alex Siminyu, Amani Kirao, Amani Safari, Ameline Nussbaumer, Amicie Lavault, Amina simba, Andrew Kinzer, Anna Radkovic, Antony Kariuki, Apolloh James, Artur Gijsbertsen, Aurelia Gijsbertsen, Benjamin Suluby, Benson Kadenge, Bonface Mutie, Carlos @@@, Charo Taabu, Chris Halliwell, Christine Pendo Samini, Colin Jackson, Cynthia Adiambo, Daniel Kazungu, David Yekutiel, Dena Elijah, Dickson Thoya, Dixon, Doris Schaule, Doris Schaule, Edwin, Elizabeth Obilo, Emma Mwirigi, Eric Kinoti, Eric Thuranira, Erick Karisa Menza, Erick Kinoti, Ernest Njira, Ester Matingisa, Faith Aboki, Francis Kazungu, Francisca Sprong, Frank, Freshly Tsofa, George Perkin, Harriet Thomasiana, Harry Mjambili, Hassan Shaban Kombo, Hilary Mwachia, Hudson Mkoka, Israel Lemako, Jaap Gijsbertsen, James Boozard, Jan Van Beck, Japhet Amani, Japheth Musil Mwendwa, Jeff Ochieng', Job Aben, John Mansfield, Jonas Flohr, Jonathan Furaha, Jonathan Mangi, Joseph Mangi, Joseph Ojuja, Judith Adhiambo, Juma Badi, Kai Jackson, Kate England, Katie Henderson, Kibwana Ali, Kirao Lennox, Kirao Mwari, Lempiris Leteipa, Lesiamo Leteipa, Lobic Worden, Lucky Baraka, Lucky Kazungu, Lugo Katana, Lydia Kayaa, Lynton Baird, Mangi Joseph, Maria Blunsum, Marissa, Martha Nzisa Mutiso, Martilda Munga, Melisa, Michael Kadenge, Millicent Ndegwa, Mlamba Edson, Mohammed Ali, Monica Njambi, Mustafa Adamjee, Mvera Kirao, Nicholas Warren, Nyale Dadson, Patrick Kaingu, Paul, Paul Mwangi, Pauline Kasungu, Peter Musembi, Peter Ndurya, Queen Elizabeth Hare, Raphaël Nussbaumer, Rehema, Ruth Kerosia, Sadam Pande, Saddam Kailo, Salim Abdallah, Salma Mazrui, Sam Oldland, Sammy Kenga, Samuel Mwen, Sifa Ngonyo, Simon Ikham, Simon Kenga, Sophie Dana, Stacey Wangari, Stanley Thoya Baya, Steve Methu, Tanis Short, Ted Nanninga, Thoya Charo, Timothy mweri"</code></pre>
</div>
</div>
</section>
<section id="export-in-darwin-format" class="level2">
<h2 class="anchored" data-anchor-id="export-in-darwin-format">Export in Darwin format</h2>
<section id="export-event-table" class="level3">
<h3 class="anchored" data-anchor-id="export-event-table">Export Event table</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>events <span class="ot">&lt;-</span> counts <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date, site ) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">start_time =</span> <span class="fu">first</span>(start_time),</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">end_time =</span> <span class="fu">first</span>(end_time),</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">coverage =</span> <span class="fu">first</span>(coverage),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">method =</span> <span class="fu">first</span>(method),</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">water =</span> <span class="fu">first</span>(water),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">tidal =</span> <span class="fu">first</span>(tidal),</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">weather =</span> <span class="fu">first</span>(weather),</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">disturbed =</span> <span class="fu">first</span>(disturbed),</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">participants =</span> <span class="fu">first</span>(participants), </span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups=</span><span class="st">"drop"</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(locations.list, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"site"</span> <span class="ot">=</span> <span class="st">"site_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"Event"</span>,</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">language =</span> <span class="st">"en"</span>,</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">license =</span> <span class="st">"http://creativecommons.org/publicdomain/zero/1.0/legalcode"</span>,</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">rightsHolder =</span> <span class="st">"A Rocha Kenya"</span>,</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">ownerInstitutionCode =</span> <span class="st">"ARK"</span>,</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">eventID =</span> <span class="fu">paste</span>(<span class="at">sep=</span><span class="st">"_"</span>, <span class="fu">format</span>(date,<span class="st">"%Y%m%d"</span>), <span class="fu">if_else</span>(site<span class="sc">==</span><span class="st">'Sabaki'</span>, <span class="st">"sabaki"</span>, <span class="st">"mida"</span>)),</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">samplingProtocol =</span> <span class="st">'Water Bird Count'</span>,</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">sampleSizeValue =</span> <span class="fu">difftime</span>(end_time, start_time, <span class="at">units =</span> <span class="st">"min"</span>),</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">sampleSizeUnit =</span> <span class="st">"minutes"</span>,</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">samplingEffort =</span> coverage,</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># sampleSizeValue = if_else(site=="Sabaki",3.40,6.06),</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># sampleSizeUnit = "square kilometre",</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">eventDate =</span> <span class="fu">format</span>(date,<span class="st">"%Y-%m-%d"</span>),</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">eventTime =</span> <span class="fu">paste0</span>(<span class="fu">format</span>(start_time,<span class="st">"%H:%M"</span>),<span class="st">"/"</span>,<span class="fu">format</span>(end_time,<span class="st">"%H:%M"</span>)),</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># eventRemarks = "",</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">locationID =</span> <span class="fu">if_else</span>(site<span class="sc">==</span><span class="st">'Sabaki'</span>, <span class="st">"sabaki"</span>, <span class="st">"mida"</span>),</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">continent =</span> <span class="st">"Africa"</span>,</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># waterBody = if_else(site=='Sabaki', "http://www.geonames.org/197853/galana.html", "https://www.geonames.org/186759/mida-creek.html"),</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">country =</span> <span class="st">"Kenya"</span>,</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">countryCode =</span> <span class="st">"KE"</span>,</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># stateProvince =" ",</span></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">county =</span> <span class="st">"Kilifi"</span>,</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># municipality = if_else(site=='Sabaki', "Sabaki", "Mida"),</span></span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">locality =</span> <span class="fu">if_else</span>(site<span class="sc">==</span><span class="st">'Sabaki'</span>, <span class="st">"Sabaki River Mouth"</span>, <span class="st">"Mida Creek"</span>),</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">#locationRemarks = description,</span></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimalLatitude =</span> latitude,</span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimalLongitude =</span> longitude,</span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># geodeticDatum ="WGS84",</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># footprintWKT = if_else(site=='Sabaki',"POLYGON ((40.1294906 -3.1562848,40.1303489 -3.1575917,40.1319797 -3.1595199,40.1333959 -3.1615125,40.1339323 -3.1633336,40.1359064 -3.1646619,40.1394469 -3.1666116,40.1413138 -3.1699325,40.1402194 -3.1725249,40.1405198 -3.1751601,40.1439531 -3.1781381,40.1459272 -3.1762956,40.1484377 -3.1710251,40.1524717 -3.1611482,40.1489527 -3.1582987,40.1466567 -3.158063,40.1454121 -3.1573882,40.1424188 -3.1545065,40.1388891 -3.1541208,40.1349408 -3.1522033,40.1327843 -3.1529264,40.1335032 -3.1564669,40.1344044 -3.1583844,40.133825 -3.1588772,40.132838 -3.1575274,40.1310784 -3.1552563,40.1294906 -3.1562848))", "POLYGON ((39.9635702 -3.3292204,39.9630981 -3.3312768,39.9632269 -3.333419,39.9617249 -3.3379175,39.9663168 -3.3422017,39.971767 -3.3402738,39.976123 -3.3452649,39.9780434 -3.349517,39.9885738 -3.3435459,39.9846846 -3.3381745,39.9832683 -3.3340188,39.9831825 -3.3328192,39.9836975 -3.3319195,39.9850279 -3.3301201,39.9862724 -3.3288776,39.9878603 -3.3264784,39.9900919 -3.324422,39.9880749 -3.3208231,39.9842983 -3.320866,39.9815517 -3.321123,39.9787622 -3.3212516,39.975844 -3.3218514,39.9724966 -3.3228796,39.9697929 -3.3240364,39.9676901 -3.3256216,39.9654585 -3.3266498,39.9644714 -3.3272068,39.9638277 -3.3283635,39.9635702 -3.3292204))"),</span></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>    <span class="co">#georeferencedBy = "Raphaël Nussbaumer",</span></span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>    <span class="co">#georeferencedDate = "03/06/2020",</span></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>    <span class="co">#georeferenceSources = "https://www.geonames.org/ | https://www.google.co.ke/maps/",</span></span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">#georeferenceVerificationStatus = "verified by curator",</span></span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">#georeferenceRemarks = "",</span></span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">dynamicProperties =</span> <span class="fu">paste0</span>(<span class="st">"{"</span>,</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>      <span class="st">'coverage: "'</span>,coverage,<span class="st">'", '</span>,</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>      <span class="st">'water: "'</span>,water,<span class="st">'", '</span>,</span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>      <span class="st">'tidal: "'</span>,tidal,<span class="st">'", '</span>,</span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>      <span class="st">'weather: "'</span>,weather,<span class="st">'", '</span>,</span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>      <span class="st">'disturbed: "'</span>,disturbed,<span class="st">'", '</span>,</span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>      <span class="st">'participants: "'</span>,participants,<span class="st">'", '</span>,</span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>      <span class="st">'CWAC_sitecode: "'</span>,CWAC_reference,<span class="st">'", '</span>,</span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a>      <span class="st">'IBA_sitecode: "'</span>,IBA,<span class="st">'", '</span>,</span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a>      <span class="st">"}"</span></span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a>events <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="sc">%&gt;%</span>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span> <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">type</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">language</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">license</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rightsHolder</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ownerInstitutionCode</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">eventID</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">samplingProtocol</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">sampleSizeValue</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">sampleSizeUnit</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">samplingEffort</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">eventDate</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">eventTime</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">locationID</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">continent</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">countryCode</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">county</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">locality</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">decimalLatitude</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">decimalLongitude</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">dynamicProperties</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Event</td>
<td style="text-align: left;">en</td>
<td style="text-align: left;">http://creativecommons.org/publicdomain/zero/1.0/legalcode</td>
<td style="text-align: left;">A Rocha Kenya</td>
<td style="text-align: left;">ARK</td>
<td style="text-align: left;">19981029_mida</td>
<td style="text-align: left;">Water Bird Count</td>
<td style="text-align: left;">NA mins</td>
<td style="text-align: left;">minutes</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">1998-10-29</td>
<td style="text-align: left;">NA/NA</td>
<td style="text-align: left;">mida</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: left;">Kenya</td>
<td style="text-align: left;">KE</td>
<td style="text-align: left;">Kilifi</td>
<td style="text-align: left;">Mida Creek</td>
<td style="text-align: right;">-3.330189</td>
<td style="text-align: right;">39.96709</td>
<td style="text-align: left;">{coverage: "", water: "", tidal: "", weather: "", disturbed: "", participants: "", CWAC_sitecode: "NA", IBA_sitecode: "KE016", }</td>
</tr>
<tr class="even">
<td style="text-align: left;">Event</td>
<td style="text-align: left;">en</td>
<td style="text-align: left;">http://creativecommons.org/publicdomain/zero/1.0/legalcode</td>
<td style="text-align: left;">A Rocha Kenya</td>
<td style="text-align: left;">ARK</td>
<td style="text-align: left;">19990310_mida</td>
<td style="text-align: left;">Water Bird Count</td>
<td style="text-align: left;">NA mins</td>
<td style="text-align: left;">minutes</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">1999-03-10</td>
<td style="text-align: left;">NA/NA</td>
<td style="text-align: left;">mida</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: left;">Kenya</td>
<td style="text-align: left;">KE</td>
<td style="text-align: left;">Kilifi</td>
<td style="text-align: left;">Mida Creek</td>
<td style="text-align: right;">-3.330189</td>
<td style="text-align: right;">39.96709</td>
<td style="text-align: left;">{coverage: "", water: "", tidal: "", weather: "", disturbed: "", participants: "", CWAC_sitecode: "NA", IBA_sitecode: "KE016", }</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Event</td>
<td style="text-align: left;">en</td>
<td style="text-align: left;">http://creativecommons.org/publicdomain/zero/1.0/legalcode</td>
<td style="text-align: left;">A Rocha Kenya</td>
<td style="text-align: left;">ARK</td>
<td style="text-align: left;">19990324_mida</td>
<td style="text-align: left;">Water Bird Count</td>
<td style="text-align: left;">NA mins</td>
<td style="text-align: left;">minutes</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">1999-03-24</td>
<td style="text-align: left;">NA/NA</td>
<td style="text-align: left;">mida</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: left;">Kenya</td>
<td style="text-align: left;">KE</td>
<td style="text-align: left;">Kilifi</td>
<td style="text-align: left;">Mida Creek</td>
<td style="text-align: right;">-3.330189</td>
<td style="text-align: right;">39.96709</td>
<td style="text-align: left;">{coverage: "", water: "", tidal: "", weather: "", disturbed: "", participants: "", CWAC_sitecode: "NA", IBA_sitecode: "KE016", }</td>
</tr>
<tr class="even">
<td style="text-align: left;">Event</td>
<td style="text-align: left;">en</td>
<td style="text-align: left;">http://creativecommons.org/publicdomain/zero/1.0/legalcode</td>
<td style="text-align: left;">A Rocha Kenya</td>
<td style="text-align: left;">ARK</td>
<td style="text-align: left;">19990408_mida</td>
<td style="text-align: left;">Water Bird Count</td>
<td style="text-align: left;">NA mins</td>
<td style="text-align: left;">minutes</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">1999-04-08</td>
<td style="text-align: left;">NA/NA</td>
<td style="text-align: left;">mida</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: left;">Kenya</td>
<td style="text-align: left;">KE</td>
<td style="text-align: left;">Kilifi</td>
<td style="text-align: left;">Mida Creek</td>
<td style="text-align: right;">-3.330189</td>
<td style="text-align: right;">39.96709</td>
<td style="text-align: left;">{coverage: "", water: "", tidal: "", weather: "", disturbed: "", participants: "", CWAC_sitecode: "NA", IBA_sitecode: "KE016", }</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Event</td>
<td style="text-align: left;">en</td>
<td style="text-align: left;">http://creativecommons.org/publicdomain/zero/1.0/legalcode</td>
<td style="text-align: left;">A Rocha Kenya</td>
<td style="text-align: left;">ARK</td>
<td style="text-align: left;">19990510_mida</td>
<td style="text-align: left;">Water Bird Count</td>
<td style="text-align: left;">NA mins</td>
<td style="text-align: left;">minutes</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">1999-05-10</td>
<td style="text-align: left;">NA/NA</td>
<td style="text-align: left;">mida</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: left;">Kenya</td>
<td style="text-align: left;">KE</td>
<td style="text-align: left;">Kilifi</td>
<td style="text-align: left;">Mida Creek</td>
<td style="text-align: right;">-3.330189</td>
<td style="text-align: right;">39.96709</td>
<td style="text-align: left;">{coverage: "", water: "", tidal: "", weather: "", disturbed: "", participants: "", CWAC_sitecode: "NA", IBA_sitecode: "KE016", }</td>
</tr>
<tr class="even">
<td style="text-align: left;">Event</td>
<td style="text-align: left;">en</td>
<td style="text-align: left;">http://creativecommons.org/publicdomain/zero/1.0/legalcode</td>
<td style="text-align: left;">A Rocha Kenya</td>
<td style="text-align: left;">ARK</td>
<td style="text-align: left;">20000129_mida</td>
<td style="text-align: left;">Water Bird Count</td>
<td style="text-align: left;">NA mins</td>
<td style="text-align: left;">minutes</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">2000-01-29</td>
<td style="text-align: left;">NA/NA</td>
<td style="text-align: left;">mida</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: left;">Kenya</td>
<td style="text-align: left;">KE</td>
<td style="text-align: left;">Kilifi</td>
<td style="text-align: left;">Mida Creek</td>
<td style="text-align: right;">-3.330189</td>
<td style="text-align: right;">39.96709</td>
<td style="text-align: left;">{coverage: "", water: "", tidal: "", weather: "", disturbed: "", participants: "", CWAC_sitecode: "NA", IBA_sitecode: "KE016", }</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="export-occurance-table" class="level3">
<h3 class="anchored" data-anchor-id="export-occurance-table">Export occurance table</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>occurences <span class="ot">&lt;-</span> counts <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(species.list, <span class="at">by=</span><span class="st">"common_name"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">basisOfRecord =</span> <span class="st">"HumanObservation"</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">eventID =</span> <span class="fu">paste</span>(<span class="at">sep=</span><span class="st">"_"</span>, <span class="fu">format</span>(date,<span class="st">"%Y%m%d"</span>), <span class="fu">if_else</span>(site<span class="sc">==</span><span class="st">'Sabaki'</span>, <span class="st">"sabaki"</span>, <span class="st">"mida"</span>)),</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">occurrenceID =</span> <span class="fu">paste</span>(<span class="at">sep=</span><span class="st">"_"</span>,eventID, taxon_id),</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">individualCount =</span> count,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># organismQuantity = count,</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># organismQuantityType = "individu",</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># occurrenceStatus = "present",</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">taxonID =</span> taxon_id,</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">scientificName =</span> scientific_name,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">kingdom =</span> <span class="st">"Animalia"</span>,</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">phylum =</span> <span class="st">"Chordata"</span>,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">class =</span> <span class="st">"Aves"</span>,</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">taxonRank =</span> taxon_rank,</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># scientificNameAuthorship = "",</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">vernacularName =</span> common_name,</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">occurrenceRemarks =</span> <span class="fu">paste0</span>(quality,<span class="st">" | "</span>, comment),</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>occurences <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="sc">%&gt;%</span>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span> <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">basisOfRecord</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">eventID</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">occurrenceID</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">individualCount</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">taxonID</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">scientificName</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">kingdom</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">phylum</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">class</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">taxonRank</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">vernacularName</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">occurrenceRemarks</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">HumanObservation</td>
<td style="text-align: left;">19981029_mida</td>
<td style="text-align: left;">19981029_mida_batgod</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">batgod</td>
<td style="text-align: left;">Limosa lapponica</td>
<td style="text-align: left;">Animalia</td>
<td style="text-align: left;">Chordata</td>
<td style="text-align: left;">Aves</td>
<td style="text-align: left;">Species</td>
<td style="text-align: left;">Bar-Tailed Godwit</td>
<td style="text-align: left;">&amp;#124;</td>
</tr>
<tr class="even">
<td style="text-align: left;">HumanObservation</td>
<td style="text-align: left;">19981029_mida</td>
<td style="text-align: left;">19981029_mida_caster1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">caster1</td>
<td style="text-align: left;">Hydroprogne caspia</td>
<td style="text-align: left;">Animalia</td>
<td style="text-align: left;">Chordata</td>
<td style="text-align: left;">Aves</td>
<td style="text-align: left;">Species</td>
<td style="text-align: left;">Caspian Tern</td>
<td style="text-align: left;">&amp;#124;</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HumanObservation</td>
<td style="text-align: left;">19981029_mida</td>
<td style="text-align: left;">19981029_mida_comgre</td>
<td style="text-align: right;">114</td>
<td style="text-align: left;">comgre</td>
<td style="text-align: left;">Tringa nebularia</td>
<td style="text-align: left;">Animalia</td>
<td style="text-align: left;">Chordata</td>
<td style="text-align: left;">Aves</td>
<td style="text-align: left;">Species</td>
<td style="text-align: left;">Common Greenshank</td>
<td style="text-align: left;">&amp;#124;</td>
</tr>
<tr class="even">
<td style="text-align: left;">HumanObservation</td>
<td style="text-align: left;">19981029_mida</td>
<td style="text-align: left;">19981029_mida_corplo</td>
<td style="text-align: right;">89</td>
<td style="text-align: left;">corplo</td>
<td style="text-align: left;">Charadrius hiaticula</td>
<td style="text-align: left;">Animalia</td>
<td style="text-align: left;">Chordata</td>
<td style="text-align: left;">Aves</td>
<td style="text-align: left;">Species</td>
<td style="text-align: left;">Common Ringed Plover</td>
<td style="text-align: left;">&amp;#124;</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HumanObservation</td>
<td style="text-align: left;">19981029_mida</td>
<td style="text-align: left;">19981029_mida_craplo1</td>
<td style="text-align: right;">560</td>
<td style="text-align: left;">craplo1</td>
<td style="text-align: left;">Dromas ardeola</td>
<td style="text-align: left;">Animalia</td>
<td style="text-align: left;">Chordata</td>
<td style="text-align: left;">Aves</td>
<td style="text-align: left;">Species</td>
<td style="text-align: left;">Crab-Plover</td>
<td style="text-align: left;">&amp;#124;</td>
</tr>
<tr class="even">
<td style="text-align: left;">HumanObservation</td>
<td style="text-align: left;">19981029_mida</td>
<td style="text-align: left;">19981029_mida_cursan</td>
<td style="text-align: right;">600</td>
<td style="text-align: left;">cursan</td>
<td style="text-align: left;">Calidris ferruginea</td>
<td style="text-align: left;">Animalia</td>
<td style="text-align: left;">Chordata</td>
<td style="text-align: left;">Aves</td>
<td style="text-align: left;">Species</td>
<td style="text-align: left;">Curlew Sandpiper</td>
<td style="text-align: left;">&amp;#124;</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
<section id="write-to-excel" class="level2">
<h2 class="anchored" data-anchor-id="write-to-excel">Write to Excel</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>()</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(events, <span class="at">file =</span> <span class="fu">paste0</span>(<span class="st">"../data/dwc_files/events_"</span>,v,<span class="st">".csv"</span>), </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">na =</span> <span class="st">""</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">fileEncoding =</span> <span class="st">"UTF-8"</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(occurences, <span class="at">file =</span> <span class="fu">paste0</span>(<span class="st">"../data/dwc_files/occurences_"</span>,v,<span class="st">".csv"</span>), </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">na =</span> <span class="st">""</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">fileEncoding =</span> <span class="st">"UTF-8"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>